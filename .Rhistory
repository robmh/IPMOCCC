devtools::load_all(".")
x <- read.csv2("C:\\Roberto\\CONSOLIDER\\Modelo forestal IPM España\\Datos\\ToteslesParceles.csv",
header=TRUE,dec=".",sep=";",comment.char="")
wd <- "C:\\Roberto\\CONSOLIDER\\Modelo forestal IPM España\\Datos\\"
fire <- read.csv2(paste0(wd,"DanysIncendi.csv"),header=TRUE,dec=".",sep=";",comment.char="")
wd <- "C:\\Roberto\\CONSOLIDER\\Modelo forestal IPM España\\Datos\\"
fire <- read.csv2(paste0(wd,"DanysIncendi.csv"),header=TRUE,dec=".",sep=";",comment.char="")
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
devtools::build_manual
devtools::build_manual()
library(IPMOCCC)
library(IPMOCCC)
source('C:/Roberto/Ecosystem Modelling Facility/R software/IPMOCCC/R/add_timediff.r')
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
read.fire
source('C:/Roberto/Ecosystem Modelling Facility/R software/IPMOCCC/R/read_trees.r')
library(IPMOCCC)
library(IPMOCCC)
filter_growth
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
?drop.terms
?terms
y<-runif(100)
x<-runif(100)
basal.area<-runif(100)
r<-glm(y~x+basal.area)
terms(r)
terms(r)[]
?drop.terms
tt<-terms(r)
tt[1]
tt[2:3]
tt[2]
tt[2][]
tt[2][[]]
tt[2][1]
tt[[2]]
tt[[3]]
tt[[4]]
t
tt
labels(tt)
any("basal.area"==labels(tt))
drop.terms(tt,2)
ff <- y ~ z + x + w
tt <- terms(ff)
tt
delete.response(tt)
drop.terms(tt, 2:3, keep.response = TRUE)
tt[-1]
tt[2:3]
reformulate(attr(tt, "term.labels"))drop.terms(tt,2)
ff <- y ~ z + x + w
tt <- terms(ff)
tt
delete.response(tt)
drop.terms(tt, 2:3, keep.response = TRUE)
tt[-1]
tt[2:3]
reformulate(attr(tt, "term.labels"))
tt
r<-glm(y~x+basal.area)
tt<-terms(r)
any(labels(tt)=="basal.area")
dd <- drop.terms(tt,i)
i <- which(labels(tt)=="basal.area")
dd <- drop.terms(tt,i)
dd
reformulate(labels(dd))
dd <- drop.terms(tt,i,keep.response=T)
ff <- reformulate(dd)
ff <- reformulate(labels(dd))
ff
dd <- drop.terms(tt,i,keep.response=T)
ff <- reformulate(labels(dd))
ff
ff <- reformulate(labels(dd),response=T)
ff
ff <- reformulate(labels(dd),response=T)
reformulate(attr(tt, "term.labels"))
reformulate(attr(dd, "term.labels"))
dd <- drop.terms(tt,i,keep.response=T)
tt
formula(tt)
?formula
all.vars(tt)
ff <- reformulate(labels(dd),response=all.vars(tt)[1])
ff
tt <- terms(r)
i <- which(labels(tt)=="basal.area")
drop.terms(tt,i,keep.response=T)
drop.terms(tt,i,keep.response=F)
?update
obj2 <- update(r,f)
f <- reformulate(labels(dd),response=all.vars(tt)[1])
dt <- drop.terms(tt,i)
f <- reformulate(labels(dt),response=all.vars(tt)[1])
obj2 <- update(r,f)
summary(r)
summary(obj2)
library(IPMOCCC)
library(IPMOCCC)
a<-1:4
i<-which(a)
i<-which(a==5)
i
length(i)
?warning
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
source('C:/Roberto/Ecosystem Modelling Facility/IPM/IFN data - original analysis/Supervivencia sin gestión CONSOLIDER V5 - nuevos datos.r')
library(IPMOCCC)
library(IPMOCCC)
y<-runif(100)
x1<-runif(100)
x2<-runif(100)
r<-lm(y~x1+x2)
coef(r)["basal.area"]
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
filter_growth
print(pi,20)
print(pi,0)
print(pi,40)
print(pi,30)
print(pi,20)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
source('C:/Roberto/Ecosystem Modelling Facility/R software/IPMOCCC/R/filter_trees.r')
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
tolower()
?tolower
source('C:/Roberto/Ecosystem Modelling Facility/R software/IPMOCCC/R/helpers.r')
check.options
fire <- read_fire()
source('C:/Roberto/Ecosystem Modelling Facility/R software/IPMOCCC/R/read_fire.r', encoding = 'UTF-8')
fire <- read_fire()
head(fire)
head(fire,40)
summary(Fire)
summary(fire)
unique(fire$damage)
dim(fire)
read_fire
hist(fire$DANYSEVER)
hist(fire$DANYSEVER,100)
hist(fire$DANYMITJÀ,100)
hist(fire$DANYSEVER,100)
hist(fire$DANYMITJÀ,100)
hist(fire$DANYPETIT,100)
a<-F
a==0
library(IPMOCCC)
library(IPMOCCC)
source('C:/Roberto/Ecosystem Modelling Facility/R software/IPMOCCC/R/filter_trees.r')
source('C:/Roberto/Ecosystem Modelling Facility/R software/IPMOCCC/R/helpers.r')
source('C:/Roberto/Ecosystem Modelling Facility/R software/IPMOCCC/R/helpers.r')
source('C:/Roberto/Ecosystem Modelling Facility/R software/IPMOCCC/R/filter_trees.r')
source('C:/Roberto/Ecosystem Modelling Facility/R software/IPMOCCC/R/filter_trees.r')
source('C:/Roberto/Ecosystem Modelling Facility/R software/IPMOCCC/R/filter_trees.r')
source('C:/Roberto/Ecosystem Modelling Facility/R software/IPMOCCC/R/helpers.r')
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
library(IPMOCCC)
load("Reclutamiento V17")
getwd()
wd <- "C:\\Roberto\\Cartografia\\SMC\\Dades 1971-2005\\"
temper_ref <- raster::raster(paste0(wd,"Mean annual temperature 1971-2000.tif"))
# Reference period.
wd <- "C:\\Roberto\\Cartografia\\SMC\\Dades 1971-2005\\"
temper_ref <- raster::raster(paste0(wd,"Mean annual temperature 1971-2000.tif"))
prec_ref <- raster::raster(paste0(wd,"Total annual precipitation 1971-2000.tif"))
# We read period 1990-2000.
temper <- raster::raster(paste0(wd,"Mean annual temperature 1991-2000.tif"))
# Reference period.
wd <- "C:\\Roberto\\Cartografia\\SMC\\Dades 1971-2005\\"
temp_ref <- raster::raster(paste0(wd,"Mean annual temperature 1971-2000.tif"))
prec_ref <- raster::raster(paste0(wd,"Total annual precipitation 1971-2000.tif"))
# We read period 1990-2000.
temp <- raster::raster(paste0(wd,"Mean annual temperature 1991-2000.tif"))
prec <- raster::raster(paste0(wd,"Total annual precipitation 1971-2000.tif"))
source('C:/Roberto/Ecosystem Modelling Facility/R software/IPMOCCC/R/read_climateSMC.r')
source('C:/Roberto/Ecosystem Modelling Facility/R software/IPMOCCC/R/read_climateSMC.r')
library(IPMOCCC)
library(IPMOCCC)
# Reference period.
wd <- "C:\\Roberto\\Cartografia\\SMC\\Dades 1971-2005\\"
temp_ref <- raster::raster(paste0(wd,"Mean annual temperature 1971-2000.tif"))
prec_ref <- raster::raster(paste0(wd,"Total annual precipitation 1971-2000.tif"))
# We read period 1990-2000.
temp <- raster::raster(paste0(wd,"Mean annual temperature 1991-2000.tif"))
prec <- raster::raster(paste0(wd,"Total annual precipitation 1971-2000.tif"))
# RCP45 or RCP85.
wd <- "C:\\Roberto\\Cartografia\\SMC\\Dades 2000-2100\\"
years <- 2000:2100
te <- lapply(years,function(i) raster::raster(paste0(wd,"Mean annual temperature ",i,"-",i+9,".tif")))
paste0(wd,"Mean annual temperature ",i,"-",i+9,".tif")
i=2000
paste0(wd,"Mean annual temperature ",i,"-",i+9,".tif")
# RCP45 or RCP85.
wd <- "C:\\Roberto\\Cartografia\\SMC\\Dades 2000-2100\\"
years <- 2000:2100
te <- lapply(years,function(i) raster::raster(paste0(wd,"Mean annual temperature ",i,"-",i+9,climate.model,".tif")))
climate.model = "RCP45"
te <- lapply(years,function(i) raster::raster(paste0(wd,"Mean annual temperature ",i,"-",i+9,climate.model,".tif")))
paste0(wd,"Mean annual temperature ",i,"-",i+9,climate.model,".tif")
te <- lapply(years,function(i) raster::raster(paste0(wd,"Mean annual temperature ",i,"-",i+9," ",climate.model,".tif")))
# Reference period.
wd <- "C:\\Roberto\\Cartografia\\SMC\\Dades 1971-2005\\"
temp_ref <- raster::raster(paste0(wd,"Mean annual temperature 1971-2000.tif"))
prec_ref <- raster::raster(paste0(wd,"Total annual precipitation 1971-2000.tif"))
# We read period 1990-2000.
temp <- raster::raster(paste0(wd,"Mean annual temperature 1991-2000.tif"))
prec <- raster::raster(paste0(wd,"Total annual precipitation 1971-2000.tif"))
# RCP45 or RCP85.
wd <- "C:\\Roberto\\Cartografia\\SMC\\Dades 2000-2100\\"
years <- 2000:2100
i=1
paste0(wd,"Mean annual temperature ",i,"-",i+9," ",climate.model,".tif")
i=2000
paste0(wd,"Mean annual temperature ",i,"-",i+9," ",climate.model,".tif")
te <- lapply(years,function(i) {
print(i)
raster::raster(paste0(wd,"Mean annual temperature ",i,"-",i+9," ",climate.model,".tif"))
})
te <- lapply(years,function(i) raster::raster(paste0(wd,"Mean annual temperature ",i,"-",i+9," ",climate.model,".tif")))
years <- 2000:2091
te <- lapply(years,function(i) raster::raster(paste0(wd,"Mean annual temperature ",i,"-",i+9," ",climate.model,".tif")))
pr <- lapply(years,function(i) raster::raster(paste0(wd,"Total annual precipitation ",i,"-",i+9," ",climate.model,".tif")))
# We read period 1990-2000.
temp <- c(temp,te)
prec <- c(prec,pr)
temp_ref <- raster::projectRaster(from=temp_ref,res=10000,crs="+init=epsg:32630 +units=m")
wd <- "C:\\Roberto\\Cartografia\\SMC\\Dades 1971-2005\\"
temp_ref <- raster::raster(paste0(wd,"Mean annual temperature 1971-2000.tif"))
prec_ref <- raster::raster(paste0(wd,"Total annual precipitation 1971-2000.tif"))
# We read period 1990-2000.
temp <- raster::raster(paste0(wd,"Mean annual temperature 1991-2000.tif"))
prec <- raster::raster(paste0(wd,"Total annual precipitation 1971-2000.tif"))
# RCP45 or RCP85.
wd <- "C:\\Roberto\\Cartografia\\SMC\\Dades 2000-2100\\"
years <- 2000:2091
te <- lapply(years,function(i) raster::raster(paste0(wd,"Mean annual temperature ",i,"-",i+9," ",climate.model,".tif")))
pr <- lapply(years,function(i) raster::raster(paste0(wd,"Total annual precipitation ",i,"-",i+9," ",climate.model,".tif")))
# We read period 1990-2000.
temp <- c(temp,te)
prec <- c(prec,pr)
temp_ref <- raster::projectRaster(from=temp_ref,res=10000,crs="+init=epsg:32630 +units=m")
prec_ref <- raster::projectRaster(from=prec_ref,res=10000,crs="+init=epsg:32630 +units=m")
temp <- lapply(temp,function(x) raster::projectRaster(from=x,res=10000,crs="+init=epsg:32630 +units=m"))
prec <- lapply(prec,function(x) raster::projectRaster(from=x,res=10000,crs="+init=epsg:32630 +units=m"))
names(temp) <- as.character(c(1991,years))
names(prec) <- as.character(c(1991,years))
anom.temp <- lapply(temp,function(x) x-temp_ref)
anom.prec <- lapply(prec,function(x) x/prec_ref-1)
names(temp)
library(IPMOCCC)
library(IPMOCCC)
